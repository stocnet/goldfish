<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Coordination Model and Extensions • goldfish</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="The Coordination Model and Extensions">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">goldfish</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.6.12</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>

  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="divider">
    </li>
<li class="dropdown-header">goldfish effects</li>
    <li>
      <a href="../articles/goldfishEffects.html">goldfish Effects</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">How to start</li>
    <li>
      <a href="../articles/teaching1.html">DyNAM: How to start</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">choice coordination</li>
    <li>
      <a href="../articles/teaching2.html">The Coordination Model and Extensions</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">DyNAM-i</li>
    <li>
      <a href="../articles/dynami-example.html">DyNAM-i: an example script</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/stocnet/goldfish" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>The Coordination Model and Extensions</h1>
                        <h4 data-toc-skip class="author">James
Hollway</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/stocnet/goldfish/blob/develop/vignettes/teaching2.Rmd" class="external-link"><code>vignettes/teaching2.Rmd</code></a></small>
      <div class="hidden name"><code>teaching2.Rmd</code></div>

    </div>

    
    
<p>Example script prepared analyzing the Fisheries Agreements data with
the <code>R</code> <code>goldfish</code> package. Models inspired by
section 7 of:</p>
<blockquote>
<p>Stadtfeld, Hollway &amp; Block (2017), “Dynamic Network Actor Models:
Investigating Coordination Ties through Time”, Sociological Methodology,
2017, 47(1): 1-40. DOI: 10.1177/0081175017709295</p>
</blockquote>
<div class="section level2">
<h2 id="step-0-load-package-and-data">Step 0: Load package and data<a class="anchor" aria-label="anchor" href="#step-0-load-package-and-data"></a>
</h2>
<p>First, let’s make sure we’re starting with a clean slate and take the
goldfish out of the bowl:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stocnet.github.io/goldfish/">goldfish</a></span><span class="op">)</span></span></code></pre></div>
<p>This lazy loads several datasets, including the one we will now
use:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"Fisheries_Treaties_6070"</span><span class="op">)</span></span>
<span><span class="co"># ?Fisheries_Treaties_6070</span></span></code></pre></div>
<p>Note that these objects are only ‘promised’ for the moment, but are
available in the environment to be used, and more information will
appear as you use them. You can find out more about this dataset, its
format, and its origins in a couple of ERGM papers by calling its
documentation.</p>
</div>
<div class="section level2">
<h2 id="step-1-create-data-objects">Step 1: Create data objects<a class="anchor" aria-label="anchor" href="#step-1-create-data-objects"></a>
</h2>
<div class="section level3">
<h3 id="step-1a-define-node-sets-and-attributes">Step 1a: Define node set(s) and attributes<a class="anchor" aria-label="anchor" href="#step-1a-define-node-sets-and-attributes"></a>
</h3>
<p>We’ve loaded a dataset that defines its nodes and their attributes as
a data frame.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">states</span><span class="op">)</span></span>
<span><span class="co">#&gt;     label present regime          gdp</span></span>
<span><span class="co">#&gt; 162   SLB   FALSE     NA           NA</span></span>
<span><span class="co">#&gt; 165   VCT    TRUE     NA 1.306663e-05</span></span>
<span><span class="co">#&gt; 167   BLZ    TRUE     NA 2.807250e-05</span></span>
<span><span class="co">#&gt; 169   KNA    TRUE     NA 1.236664e-05</span></span>
<span><span class="co">#&gt; 170   BRN   FALSE     NA           NA</span></span>
<span><span class="co">#&gt; 193   KIR   FALSE     NA           NA</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">states</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "data.frame"</span></span></code></pre></div>
<p>We need to define them as nodes so that goldfish knows what to do
with them.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">states</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/defineNodes.html">defineNodes</a></span><span class="op">(</span><span class="va">states</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">states</span><span class="op">)</span></span>
<span><span class="co">#&gt; Number of nodes: 6 </span></span>
<span><span class="co">#&gt; Number of present nodes: 6 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; First 6 rows</span></span>
<span><span class="co">#&gt;   label present regime         gdp</span></span>
<span><span class="co">#&gt; 1   AND    TRUE     NA          NA</span></span>
<span><span class="co">#&gt; 2   DNK    TRUE     10 0.006248947</span></span>
<span><span class="co">#&gt; 3   FRA    TRUE      5 0.062651475</span></span>
<span><span class="co">#&gt; 4   DEU    TRUE     -9          NA</span></span>
<span><span class="co">#&gt; 5   ITA    TRUE     10 0.040385288</span></span>
<span><span class="co">#&gt; 6   LIE    TRUE     NA          NA</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">states</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "nodes.goldfish" "data.frame"</span></span></code></pre></div>
<p>As you can see, the structure is the same, but the added class helps
goldfish interpret the data frame correctly.</p>
<p>Next we want to link events to this nodeset to indicate how the
attributes change. There are three attributes associated with this node
set, and they all change:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">sovchanges</span><span class="op">)</span></span>
<span><span class="co">#&gt;                     time node replace</span></span>
<span><span class="co">#&gt; 1165 1960-04-03 00:00:00  SEN    TRUE</span></span>
<span><span class="co">#&gt; 99   1960-04-26 23:00:00  TGO    TRUE</span></span>
<span><span class="co">#&gt; 1317 1960-05-31 00:00:00  COD    TRUE</span></span>
<span><span class="co">#&gt; 1316 1960-05-31 00:00:00  MLI    TRUE</span></span>
<span><span class="co">#&gt; 100  1960-06-19 23:00:00  MLI    TRUE</span></span>
<span><span class="co">#&gt; 101  1960-06-25 23:00:00  MDG    TRUE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">regchanges</span><span class="op">)</span></span>
<span><span class="co">#&gt;            time node replace</span></span>
<span><span class="co">#&gt; 814  1960-01-02  LAO      -1</span></span>
<span><span class="co">#&gt; 361  1960-01-16  CUB      NA</span></span>
<span><span class="co">#&gt; 410  1960-01-16  VNM      -8</span></span>
<span><span class="co">#&gt; 1269 1960-04-04  SEN      -1</span></span>
<span><span class="co">#&gt; 1185 1960-04-16  KOR      NA</span></span>
<span><span class="co">#&gt; 1449 1960-04-27  TGO      -6</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">gdpchanges</span><span class="op">)</span></span>
<span><span class="co">#&gt;           time node     replace</span></span>
<span><span class="co">#&gt; 202 1961-01-01  DNK 0.006933842</span></span>
<span><span class="co">#&gt; 203 1961-01-01  FRA 0.068346742</span></span>
<span><span class="co">#&gt; 205 1961-01-01  ITA 0.044842760</span></span>
<span><span class="co">#&gt; 207 1961-01-01  NLD 0.013493834</span></span>
<span><span class="co">#&gt; 208 1961-01-01  PRT 0.003417517</span></span>
<span><span class="co">#&gt; 211 1961-01-01  ESP 0.013834301</span></span></code></pre></div>
<p>The first attribute, in the second column of the data frame, is
special. It holds the (reserved) “present” variable that indicates
whether nodes are available to send or receive ties.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">states</span><span class="op">$</span><span class="va">present</span><span class="op">)</span> <span class="co"># or states[,2]</span></span>
<span><span class="co">#&gt; [1] TRUE TRUE TRUE TRUE TRUE TRUE</span></span></code></pre></div>
<p>Some state nodes are not present (do not hold sovereign status) at
the start of our study period. But we do have an additional list of
events detailing how these states gain (and some lose) sovereign status
during the study period. To make sure goldfish recognises these changes
at the appropriate point, we “link” these events to the node set and
attribute we have defined.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">states</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/linkEvents.html">linkEvents</a></span><span class="op">(</span><span class="va">states</span>, <span class="va">sovchanges</span>, attribute <span class="op">=</span> <span class="st">"present"</span><span class="op">)</span></span>
<span><span class="co"># If you call the object now, what happens?</span></span>
<span><span class="va">states</span></span>
<span><span class="co">#&gt; Number of nodes: 154 </span></span>
<span><span class="co">#&gt; Number of present nodes: 137 </span></span>
<span><span class="co">#&gt; Dynamic attribute(s):    Linked events</span></span>
<span><span class="co">#&gt;    present                  sovchanges </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; First 6 rows</span></span>
<span><span class="co">#&gt;   label present regime         gdp</span></span>
<span><span class="co">#&gt; 1   AND    TRUE     NA          NA</span></span>
<span><span class="co">#&gt; 2   DNK    TRUE     10 0.006248947</span></span>
<span><span class="co">#&gt; 3   FRA    TRUE      5 0.062651475</span></span>
<span><span class="co">#&gt; 4   DEU    TRUE     -9          NA</span></span>
<span><span class="co">#&gt; 5   ITA    TRUE     10 0.040385288</span></span>
<span><span class="co">#&gt; 6   LIE    TRUE     NA          NA</span></span></code></pre></div>
<p>That’s because the event list is only linked to the node set, to
update it when necessary. You can see what is linked to which attribute
here:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">states</span><span class="op">)</span></span>
<span><span class="co">#&gt; Classes 'nodes.goldfish' and 'data.frame':   154 obs. of  4 variables:</span></span>
<span><span class="co">#&gt;  $ label  : chr  "AND" "DNK" "FRA" "DEU" ...</span></span>
<span><span class="co">#&gt;  $ present: logi  TRUE TRUE TRUE TRUE TRUE TRUE ...</span></span>
<span><span class="co">#&gt;  $ regime : num  NA 10 5 -9 10 NA 10 -9 -1 NA ...</span></span>
<span><span class="co">#&gt;  $ gdp    : num  NA 0.00625 0.06265 NA 0.04039 ...</span></span>
<span><span class="co">#&gt;  - attr(*, "events")= chr "sovchanges"</span></span>
<span><span class="co">#&gt;  - attr(*, "dynamicAttributes")= chr "present"</span></span></code></pre></div>
<p>We can continue on with our other two dynamic monadic variables. Try
this for yourself now.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">states</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/linkEvents.html">linkEvents</a></span><span class="op">(</span><span class="va">states</span>, <span class="va">regchanges</span>, attribute <span class="op">=</span> <span class="st">"regime"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/linkEvents.html">linkEvents</a></span><span class="op">(</span><span class="va">gdpchanges</span>, attribute <span class="op">=</span> <span class="st">"gdp"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">states</span><span class="op">)</span></span>
<span><span class="co">#&gt; Classes 'nodes.goldfish' and 'data.frame':   154 obs. of  4 variables:</span></span>
<span><span class="co">#&gt;  $ label  : chr  "AND" "DNK" "FRA" "DEU" ...</span></span>
<span><span class="co">#&gt;  $ present: logi  TRUE TRUE TRUE TRUE TRUE TRUE ...</span></span>
<span><span class="co">#&gt;  $ regime : num  NA 10 5 -9 10 NA 10 -9 -1 NA ...</span></span>
<span><span class="co">#&gt;  $ gdp    : num  NA 0.00625 0.06265 NA 0.04039 ...</span></span>
<span><span class="co">#&gt;  - attr(*, "events")= chr [1:3] "sovchanges" "regchanges" "gdpchanges"</span></span>
<span><span class="co">#&gt;  - attr(*, "dynamicAttributes")= chr [1:3] "present" "regime" "gdp"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-1b-define-networks">Step 1b: Define networks<a class="anchor" aria-label="anchor" href="#step-1b-define-networks"></a>
</h3>
<p>Next we want to define the dyadic or network elements: the bilateral
fisheries agreements and contiguity between the state nodes.</p>
<p>Since international fisheries management began before 1960, there
were already several bilateral fisheries agreements in place at the
start of our time period. This is shown in the matrix</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bilatnet</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">12</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">12</span><span class="op">]</span>  <span class="co"># head(bilatnet, n = c(12, 12))</span></span>
<span><span class="co">#&gt;     AND DNK FRA DEU ITA LIE NLD PRT RUS SMR ESP SWE</span></span>
<span><span class="co">#&gt; AND   0   0   0   0   0   0   0   0   0   0   0   0</span></span>
<span><span class="co">#&gt; DNK   0   0   0   1   0   0   0   0   0   0   0   0</span></span>
<span><span class="co">#&gt; FRA   0   0   0   0   0   0   0   0   0   0   2   0</span></span>
<span><span class="co">#&gt; DEU   0   1   0   0   0   0   0   0   0   0   0   0</span></span>
<span><span class="co">#&gt; ITA   0   0   0   0   0   0   0   0   0   0   0   0</span></span>
<span><span class="co">#&gt; LIE   0   0   0   0   0   0   0   0   0   0   0   0</span></span>
<span><span class="co">#&gt; NLD   0   0   0   0   0   0   0   0   0   0   0   0</span></span>
<span><span class="co">#&gt; PRT   0   0   0   0   0   0   0   0   0   0   0   0</span></span>
<span><span class="co">#&gt; RUS   0   0   0   0   0   0   0   0   0   0   0   0</span></span>
<span><span class="co">#&gt; SMR   0   0   0   0   0   0   0   0   0   0   0   0</span></span>
<span><span class="co">#&gt; ESP   0   0   2   0   0   0   0   0   0   0   0   0</span></span>
<span><span class="co">#&gt; SWE   0   0   0   0   0   0   0   0   0   0   0   0</span></span></code></pre></div>
<p>Two things can be observed here. What are they?</p>
<p>So that goldfish knows how to handle this network, we define it
so:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bilatnet</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/defineNetwork.html">defineNetwork</a></span><span class="op">(</span><span class="va">bilatnet</span>, nodes <span class="op">=</span> <span class="va">states</span>, directed <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>We specify the nodes so that goldfish can check for consistency, and
relate the network to that nodeset when needed.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">bilatnet</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "network.goldfish" "matrix"           "array"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">bilatnet</span><span class="op">)</span></span>
<span><span class="co">#&gt;  'network.goldfish' num [1:154, 1:154] 0 0 0 0 0 0 0 0 0 0 ...</span></span>
<span><span class="co">#&gt;  - attr(*, "dimnames")=List of 2</span></span>
<span><span class="co">#&gt;   ..$ : chr [1:154] "AND" "DNK" "FRA" "DEU" ...</span></span>
<span><span class="co">#&gt;   ..$ : chr [1:154] "AND" "DNK" "FRA" "DEU" ...</span></span>
<span><span class="co">#&gt;  - attr(*, "events")= chr(0) </span></span>
<span><span class="co">#&gt;  - attr(*, "nodes")= chr "states"</span></span>
<span><span class="co">#&gt;  - attr(*, "directed")= logi FALSE</span></span>
<span><span class="va">bilatnet</span></span>
<span><span class="co">#&gt; Dimensions: 154 154 </span></span>
<span><span class="co">#&gt; Number of ties (no weighted): 22 </span></span>
<span><span class="co">#&gt; Nodes set(s): states </span></span>
<span><span class="co">#&gt; It is a one-mode and undirected network</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; First 6 rows and columns</span></span>
<span><span class="co">#&gt;     AND DNK FRA DEU ITA LIE</span></span>
<span><span class="co">#&gt; AND   0   0   0   0   0   0</span></span>
<span><span class="co">#&gt; DNK   0   0   0   1   0   0</span></span>
<span><span class="co">#&gt; FRA   0   0   0   0   0   0</span></span>
<span><span class="co">#&gt; DEU   0   1   0   0   0   0</span></span>
<span><span class="co">#&gt; ITA   0   0   0   0   0   0</span></span>
<span><span class="co">#&gt; LIE   0   0   0   0   0   0</span></span></code></pre></div>
<p>By stating that this is an undirected network, any updates will be
forced to be symmetric.</p>
<p>Now that goldfish recognises the matrix as a network, we can also
associate an event list that updates it. We use precisely the same
function as before (since we have defined our objects, goldfish knows
what to do and how to check it).</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bilatnet</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/linkEvents.html">linkEvents</a></span><span class="op">(</span><span class="va">bilatnet</span>, <span class="va">bilatchanges</span>, nodes <span class="op">=</span> <span class="va">states</span><span class="op">)</span></span>
<span><span class="va">bilatnet</span></span>
<span><span class="co">#&gt; Dimensions: 154 154 </span></span>
<span><span class="co">#&gt; Number of ties (no weighted): 22 </span></span>
<span><span class="co">#&gt; Nodes set(s): states </span></span>
<span><span class="co">#&gt; It is a one-mode and undirected network</span></span>
<span><span class="co">#&gt; Linked events: bilatchanges </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; First 6 rows and columns</span></span>
<span><span class="co">#&gt;     AND DNK FRA DEU ITA LIE</span></span>
<span><span class="co">#&gt; AND   0   0   0   0   0   0</span></span>
<span><span class="co">#&gt; DNK   0   0   0   1   0   0</span></span>
<span><span class="co">#&gt; FRA   0   0   0   0   0   0</span></span>
<span><span class="co">#&gt; DEU   0   1   0   0   0   0</span></span>
<span><span class="co">#&gt; ITA   0   0   0   0   0   0</span></span>
<span><span class="co">#&gt; LIE   0   0   0   0   0   0</span></span></code></pre></div>
<p>TASK: You should now be able to do the same with the initial
contiguity network and the event list changing it.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">contignet</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/defineNetwork.html">defineNetwork</a></span><span class="op">(</span><span class="va">contignet</span>, nodes <span class="op">=</span> <span class="va">states</span>, directed <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/linkEvents.html">linkEvents</a></span><span class="op">(</span><span class="va">contigchanges</span>, nodes <span class="op">=</span> <span class="va">states</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">contignet</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "network.goldfish" "matrix"           "array"</span></span>
<span><span class="va">contignet</span></span>
<span><span class="co">#&gt; Dimensions: 154 154 </span></span>
<span><span class="co">#&gt; Number of ties (no weighted): 175 </span></span>
<span><span class="co">#&gt; Nodes set(s): states </span></span>
<span><span class="co">#&gt; It is a one-mode and undirected network</span></span>
<span><span class="co">#&gt; Linked events: contigchanges </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; First 6 rows and columns</span></span>
<span><span class="co">#&gt;     AND DNK FRA DEU ITA LIE</span></span>
<span><span class="co">#&gt; AND   0   0   0   0   0   0</span></span>
<span><span class="co">#&gt; DNK   0   0   1   0   0   0</span></span>
<span><span class="co">#&gt; FRA   0   1   0   0   1   0</span></span>
<span><span class="co">#&gt; DEU   0   0   0   0   0   0</span></span>
<span><span class="co">#&gt; ITA   0   0   1   0   0   0</span></span>
<span><span class="co">#&gt; LIE   0   0   0   0   0   0</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-1c-define-dependent-events">Step 1c: Define dependent events<a class="anchor" aria-label="anchor" href="#step-1c-define-dependent-events"></a>
</h3>
<p>The final step in defining the data objects is to identify the
dependent events. Since treaty dissolution is a rarer, more complex, and
idiosyncratic process, we will only look at those events that create a
treaty tie between countries.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">createBilat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/defineDependentEvents.html">defineDependentEvents</a></span><span class="op">(</span></span>
<span>  events <span class="op">=</span> <span class="va">bilatchanges</span><span class="op">[</span><span class="va">bilatchanges</span><span class="op">$</span><span class="va">increment</span> <span class="op">==</span> <span class="fl">1</span>,<span class="op">]</span>,</span>
<span>  nodes <span class="op">=</span> <span class="va">states</span>,</span>
<span>  defaultNetwork <span class="op">=</span> <span class="va">bilatnet</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Note that we define the default network to which this dependent event
list applies, as well as the node set, so that structural effects can be
interpreted correctly.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">createBilat</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "dependent.goldfish" "data.frame"</span></span>
<span><span class="va">createBilat</span></span>
<span><span class="co">#&gt; Number of events: 69 </span></span>
<span><span class="co">#&gt; Nodes set(s): states </span></span>
<span><span class="co">#&gt; Default network: bilatnet </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; First 6 rows</span></span>
<span><span class="co">#&gt;          time sender receiver increment</span></span>
<span><span class="co">#&gt; 36 1960-03-19    FIN      SWE         1</span></span>
<span><span class="co">#&gt; 37 1960-06-23    FIN      RUS         1</span></span>
<span><span class="co">#&gt; 38 1960-11-15    FIN      NOR         1</span></span>
<span><span class="co">#&gt; 39 1960-11-17    GBR      NOR         1</span></span>
<span><span class="co">#&gt; 40 1961-03-11    GBR      ISL         1</span></span>
<span><span class="co">#&gt; 41 1961-07-19    DEU      ISL         1</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="intermediate-step-visualisation">Intermediate step: Visualisation<a class="anchor" aria-label="anchor" href="#intermediate-step-visualisation"></a>
</h2>
<p>While not a required part of the modeling process, we highly
recommend the visualisation of your data for analytic and diagnostic
purposes.</p>
<p>goldfish includes wrappers for base R commands to help extract
monadic and dyadic information for certain time points.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">as.data.frame.nodes.goldfish</span></span>
<span><span class="op">?</span><span class="va">as.matrix.network.goldfish</span></span></code></pre></div>
<p>We can use these functions to visually compare our network at two (or
more) different time periods using igraph.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r.igraph.org/" class="external-link">igraph</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stocnet.github.io/manynet/" class="external-link">manynet</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># network at the beginning of the event sequence</span></span>
<span><span class="va">startStates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span></span>
<span>  <span class="va">states</span>,</span>
<span>  time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="st">"1960-01-02"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">startNet</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">bilatnet</span>, time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="st">"1960-01-02"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://stocnet.github.io/manynet/reference/manip_as.html" class="external-link">as_igraph</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://stocnet.github.io/manynet/reference/manip_nodes.html" class="external-link">add_node_attribute</a></span><span class="op">(</span><span class="st">"present"</span>, <span class="va">startStates</span><span class="op">$</span><span class="va">present</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://stocnet.github.io/manynet/reference/manip_nodes.html" class="external-link">add_node_attribute</a></span><span class="op">(</span><span class="st">"regime"</span>, <span class="va">startStates</span><span class="op">$</span><span class="va">regime</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://stocnet.github.io/manynet/reference/manip_nodes.html" class="external-link">add_node_attribute</a></span><span class="op">(</span><span class="st">"gdp"</span>, <span class="va">startStates</span><span class="op">$</span><span class="va">gdp</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># network at the end of the event sequence</span></span>
<span><span class="va">endStates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">states</span>, time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="st">"1970-01-01"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">endNet</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">bilatnet</span>, time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="st">"1970-01-01"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://stocnet.github.io/manynet/reference/manip_as.html" class="external-link">as_igraph</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://stocnet.github.io/manynet/reference/manip_nodes.html" class="external-link">add_node_attribute</a></span><span class="op">(</span><span class="st">"present"</span>, <span class="va">endStates</span><span class="op">$</span><span class="va">present</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://stocnet.github.io/manynet/reference/manip_nodes.html" class="external-link">add_node_attribute</a></span><span class="op">(</span><span class="st">"regime"</span>, <span class="va">endStates</span><span class="op">$</span><span class="va">regime</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://stocnet.github.io/manynet/reference/manip_nodes.html" class="external-link">add_node_attribute</a></span><span class="op">(</span><span class="st">"gdp"</span>, <span class="va">endStates</span><span class="op">$</span><span class="va">gdp</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># logical value indicating if states where present and with agreements</span></span>
<span><span class="va">isStateActiveStart</span> <span class="op">&lt;-</span> <span class="va">startStates</span><span class="op">$</span><span class="va">present</span> <span class="op">&amp;</span> <span class="fu"><a href="https://stocnet.github.io/manynet/reference/measure_central_degree.html" class="external-link">node_deg</a></span><span class="op">(</span><span class="va">startNet</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span></span>
<span><span class="va">isStateActiveEnd</span> <span class="op">&lt;-</span> <span class="va">endStates</span><span class="op">$</span><span class="va">present</span> <span class="op">&amp;</span> <span class="fu"><a href="https://stocnet.github.io/manynet/reference/measure_central_degree.html" class="external-link">node_deg</a></span><span class="op">(</span><span class="va">endNet</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span></span>
<span><span class="va">isStateActive</span> <span class="op">&lt;-</span> <span class="va">isStateActiveStart</span> <span class="op">|</span> <span class="va">isStateActiveEnd</span></span>
<span></span>
<span><span class="co"># subset networks to active states</span></span>
<span><span class="va">startNet</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stocnet.github.io/manynet/reference/manip_nodes.html" class="external-link">delete_nodes</a></span><span class="op">(</span><span class="va">startNet</span>, <span class="op">!</span><span class="va">isStateActive</span><span class="op">)</span></span>
<span><span class="va">endNet</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stocnet.github.io/manynet/reference/manip_nodes.html" class="external-link">delete_nodes</a></span><span class="op">(</span><span class="va">endNet</span>, <span class="op">!</span><span class="va">isStateActive</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://stocnet.github.io/manynet/reference/map_graphs.html" class="external-link">graphs</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">startNet</span>, <span class="va">endNet</span><span class="op">)</span>, layout <span class="op">=</span> <span class="st">"fr"</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="teaching%2Fplot-teaching2-1.png" alt="plot of chunk plot-teaching2"><p class="caption">
plot of chunk plot-teaching2
</p>
</div>
<p>What can we observe?</p>
</div>
<div class="section level2">
<h2 id="step-2-specify-and-estimate-model">Step 2: Specify and estimate model<a class="anchor" aria-label="anchor" href="#step-2-specify-and-estimate-model"></a>
</h2>
<p>The second step is to specify and fit a model to this data. This step
can be broken up into several stages:</p>
<ul>
<li>Step 2a. Specify a model formula from the effects and variables
available</li>
<li>Step 2b. Calculate the change statistics associated with these
effects</li>
<li>Step 2c. Fit an appropriate model to these statistics</li>
</ul>
<p>However, in goldfish we also have the option of accelerating this
process and using memory more efficiently by combining these three
sub-steps in one. Nonetheless, it can be helpful to think of 2a
separately, and recognise steps 2b and 2c as goldfish does them.</p>
<p>Let us first see how to specify the effects and which are currently
available:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/vignette.html" class="external-link">vignette</a></span><span class="op">(</span><span class="st">"goldfishEffects"</span><span class="op">)</span></span></code></pre></div>
<p>The data and model specification is similar (though not the same as)
Stadtfeld, Hollway, and Block 2017a</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">formula1</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">createBilat</span> <span class="op">~</span> <span class="fu">inertia</span><span class="op">(</span><span class="va">bilatnet</span><span class="op">)</span> <span class="op">+</span> <span class="fu">indeg</span><span class="op">(</span><span class="va">bilatnet</span>, ignoreRep <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span></span>
<span>                <span class="fu">trans</span><span class="op">(</span><span class="va">bilatnet</span>, ignoreRep <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span></span>
<span>                <span class="fu">tie</span><span class="op">(</span><span class="va">contignet</span><span class="op">)</span> <span class="op">+</span></span>
<span>                <span class="fu">alter</span><span class="op">(</span><span class="va">states</span><span class="op">$</span><span class="va">regime</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff</a></span><span class="op">(</span><span class="va">states</span><span class="op">$</span><span class="va">regime</span><span class="op">)</span> <span class="op">+</span></span>
<span>                <span class="fu">alter</span><span class="op">(</span><span class="va">states</span><span class="op">$</span><span class="va">gdp</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff</a></span><span class="op">(</span><span class="va">states</span><span class="op">$</span><span class="va">gdp</span><span class="op">)</span></span>
<span></span>
<span><span class="va">estPrefs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  returnIntervalLogL <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  initialDamping <span class="op">=</span> <span class="fl">40</span>,</span>
<span>  maxIterations <span class="op">=</span> <span class="fl">30</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span></span>
<span>  <span class="va">partnerModel</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/estimate.html">estimate</a></span><span class="op">(</span></span>
<span>    <span class="va">formula1</span>,</span>
<span>    model <span class="op">=</span> <span class="st">"DyNAM"</span>, subModel <span class="op">=</span> <span class="st">"choice_coordination"</span>,</span>
<span>    estimationInit <span class="op">=</span> <span class="va">estPrefs</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: engine = "gather_compute" doesn't support ignoreRep effects. engine</span></span>
<span><span class="co">#&gt; ="default" is used instead.</span></span>
<span><span class="co">#&gt;    user  system elapsed </span></span>
<span><span class="co">#&gt;  57.504   2.220  59.779</span></span></code></pre></div>
<p>Did the model converge? If not, you can restart the estimation
process using the same formula and current parameter estimates:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">estPrefs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  returnIntervalLogL <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  initialDamping <span class="op">=</span> <span class="fl">40</span>,</span>
<span>  maxIterations <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  initialParameters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">partnerModel</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">partnerModel</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/estimate.html">estimate</a></span><span class="op">(</span></span>
<span>  <span class="va">formula1</span>,</span>
<span>  model <span class="op">=</span> <span class="st">"DyNAM"</span>, subModel <span class="op">=</span> <span class="st">"choice_coordination"</span>,</span>
<span>  estimationInit <span class="op">=</span> <span class="va">estPrefs</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; Warning: engine = "gather_compute" doesn't support ignoreRep effects. engine</span></span>
<span><span class="co">#&gt; ="default" is used instead.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">partnerModel</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; estimate(x = createBilat ~ inertia(bilatnet) + indeg(bilatnet, </span></span>
<span><span class="co">#&gt;     ignoreRep = TRUE) + trans(bilatnet, ignoreRep = TRUE) + tie(contignet) + </span></span>
<span><span class="co">#&gt;     alter(states$regime) + diff(states$regime) + alter(states$gdp) + </span></span>
<span><span class="co">#&gt;     diff(states$gdp), model = "DyNAM", subModel = "choice_coordination", </span></span>
<span><span class="co">#&gt;     estimationInit = estPrefs)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Effects details:</span></span>
<span><span class="co">#&gt;         Object        ignoreRep</span></span>
<span><span class="co">#&gt; inertia bilatnet               </span></span>
<span><span class="co">#&gt; indeg   bilatnet      B        </span></span>
<span><span class="co">#&gt; trans   bilatnet      B        </span></span>
<span><span class="co">#&gt; tie     contignet              </span></span>
<span><span class="co">#&gt; alter   states$regime          </span></span>
<span><span class="co">#&gt; diff    states$regime          </span></span>
<span><span class="co">#&gt; alter   states$gdp             </span></span>
<span><span class="co">#&gt; diff    states$gdp             </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;           Estimate Std. Error z-value  Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; inertia  2.8318525  0.2698244 10.4952 &lt; 2.2e-16 ***</span></span>
<span><span class="co">#&gt; indeg    0.4975580  0.0662465  7.5107 5.884e-14 ***</span></span>
<span><span class="co">#&gt; trans    0.3083405  0.2138535  1.4418  0.149350    </span></span>
<span><span class="co">#&gt; tie      1.0821380  0.2195159  4.9297 8.237e-07 ***</span></span>
<span><span class="co">#&gt; alter    0.0047377  0.0143109  0.3311  0.740602    </span></span>
<span><span class="co">#&gt; diff     0.0010369  0.0116815  0.0888  0.929268    </span></span>
<span><span class="co">#&gt; alter    5.0326922  1.5429641  3.2617  0.001107 ** </span></span>
<span><span class="co">#&gt; diff    -3.0780228  1.5940179 -1.9310  0.053485 .  </span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Converged with max abs. score of 0.00029 </span></span>
<span><span class="co">#&gt;   Log-Likelihood: -386.36</span></span>
<span><span class="co">#&gt;   AIC:  788.72 </span></span>
<span><span class="co">#&gt;   AICc: 791.12 </span></span>
<span><span class="co">#&gt;   BIC:  806.6 </span></span>
<span><span class="co">#&gt;   model: "DyNAM" subModel: "choice_coordination"</span></span></code></pre></div>
<p>Let’s interpret… - Do states prefer partners with more partners? - Do
states prefer partners that are contiguous? - Does transitivity matter?
- Do states prefer rich or democratic partners? - Do states prefer
similarly rich or democratic partners?</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">formula2</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">createBilat</span> <span class="op">~</span> <span class="fu">inertia</span><span class="op">(</span><span class="va">bilatnet</span>, weighted <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span></span>
<span>                <span class="fu">indeg</span><span class="op">(</span><span class="va">bilatnet</span><span class="op">)</span> <span class="op">+</span> <span class="fu">trans</span><span class="op">(</span><span class="va">bilatnet</span><span class="op">)</span> <span class="op">+</span></span>
<span>                <span class="fu">tie</span><span class="op">(</span><span class="va">contignet</span><span class="op">)</span> <span class="op">+</span> <span class="fu">alter</span><span class="op">(</span><span class="va">states</span><span class="op">$</span><span class="va">regime</span><span class="op">)</span> <span class="op">+</span></span>
<span>                <span class="fu"><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff</a></span><span class="op">(</span><span class="va">states</span><span class="op">$</span><span class="va">regime</span><span class="op">)</span> <span class="op">+</span> <span class="fu">alter</span><span class="op">(</span><span class="va">states</span><span class="op">$</span><span class="va">gdp</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff</a></span><span class="op">(</span><span class="va">states</span><span class="op">$</span><span class="va">gdp</span><span class="op">)</span></span>
<span></span>
<span><span class="va">estPrefs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  returnIntervalLogL <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  initialDamping <span class="op">=</span> <span class="fl">40</span>,</span>
<span>  maxIterations <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  engine <span class="op">=</span> <span class="st">"default_c"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span></span>
<span>  <span class="va">tieModel</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/estimate.html">estimate</a></span><span class="op">(</span></span>
<span>    <span class="va">formula2</span>,</span>
<span>    model <span class="op">=</span> <span class="st">"DyNAM"</span>, subModel <span class="op">=</span> <span class="st">"choice_coordination"</span>,</span>
<span>    estimationInit <span class="op">=</span> <span class="va">estPrefs</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt;    user  system elapsed </span></span>
<span><span class="co">#&gt;  31.103   0.256  31.380</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="extensions">Extensions…<a class="anchor" aria-label="anchor" href="#extensions"></a>
</h2>
<p>In the most recent version of <a href="https://stocnet.github.io/goldfish/">goldfish</a>, you will find
some functions still under development.</p>
<p>One set of functions is to help integrate the results of
<a href="https://stocnet.github.io/goldfish/">goldfish</a> models with the wider world of statistical
modeling.</p>
<p>We have implemented some “tidymodels” (or rather
<a href="https://broom.tidymodels.org/" class="external-link">broom</a>) functions for extracting and printing the key
results from goldfish results objects. Here is an example on the current
results object:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://broom.tidymodels.org/" class="external-link">broom</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/nutterb/pixiedust" class="external-link">pixiedust</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/pixiedust/man/dust.html" class="external-link">dust</a></span><span class="op">(</span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="va">tieModel</span>, conf.int <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/pixiedust/man/sprinkle.html" class="external-link">sprinkle</a></span><span class="op">(</span>col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">6</span>, <span class="fl">7</span><span class="op">)</span>, round <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/pixiedust/man/sprinkle.html" class="external-link">sprinkle</a></span><span class="op">(</span>col <span class="op">=</span> <span class="fl">5</span>, fn <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/pixiedust/man/pval_string.html" class="external-link">pvalString</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;                  term estimate std.error statistic p.value conf.low conf.high</span></span>
<span><span class="co">#&gt; 1  bilatnet inertia W    0.134     0.048     2.816   0.005    0.041     0.227</span></span>
<span><span class="co">#&gt; 2      bilatnet indeg    0.568     0.058     9.854 &lt; 0.001    0.455     0.681</span></span>
<span><span class="co">#&gt; 3      bilatnet trans    0.289     0.146      1.98   0.048    0.003     0.575</span></span>
<span><span class="co">#&gt; 4       contignet tie    1.648     0.184     8.956 &lt; 0.001    1.288     2.009</span></span>
<span><span class="co">#&gt; 5 states regime alter   -0.015     0.016    -0.957    0.34   -0.047     0.016</span></span>
<span><span class="co">#&gt; 6  states regime diff    0.008     0.013     0.651    0.52   -0.017     0.033</span></span>
<span><span class="co">#&gt; 7    states gdp alter    6.089     1.516     4.015 &lt; 0.001   -0.047     0.016</span></span>
<span><span class="co">#&gt; 8     states gdp diff   -4.601     1.582    -2.908   0.004   -0.017     0.033</span></span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://generics.r-lib.org/reference/glance.html" class="external-link">glance</a></span><span class="op">(</span><span class="va">tieModel</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 5</span></span>
<span><span class="co">#&gt;   logLik   AIC   BIC    df  nobs</span></span>
<span><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1  -359.  733.  751.     8    69</span></span></code></pre></div>
<p>Lastly, we have begun implementing further diagnostic functions that
can help users identify areas for improving their model
specification.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/examine.html">examineOutliers</a></span><span class="op">(</span><span class="va">tieModel</span><span class="op">)</span></span>
<span><span class="co">#&gt; No outliers found.</span></span>
<span><span class="fu"><a href="../reference/examine.html">examineChangepoints</a></span><span class="op">(</span><span class="va">tieModel</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="teaching%2Fplot-examine-1.png" alt="plot of chunk plot-examine" width="432"><p class="caption">
plot of chunk plot-examine
</p>
</div>
<p>For more, please see Hollway (2020) Network Embeddedness and the Rate
of Water Cooperation and Conflict.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://jameshollway.com" class="external-link">James Hollway</a>, <a href="https://sn.ethz.ch/profile.html?persid=210738" class="external-link">Christoph Stadtfeld</a>, Marion Hoffman, Alvaro Uzaheta.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
