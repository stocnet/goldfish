<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DyNAM: How to start • goldfish</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="48x48" href="../favicon-48x48.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="DyNAM: How to start">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">goldfish</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.7.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>

  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="divider">
    </li>
<li class="dropdown-header">goldfish effects</li>
    <li>
      <a href="../articles/goldfishEffects.html">goldfish Effects</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">How to start</li>
    <li>
      <a href="../articles/teaching1.html">DyNAM: How to start</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">choice coordination</li>
    <li>
      <a href="../articles/teaching2.html">The Coordination Model and Extensions</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">DyNAM-i</li>
    <li>
      <a href="../articles/dynami-example.html">DyNAM-i: an example script</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/stocnet/goldfish" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>DyNAM: How to start</h1>
            <h3 data-toc-skip class="subtitle">Dynamic Network Actor
Models using the goldfish package</h3>
                        <h4 data-toc-skip class="author">Christoph
Stadtfeld, James Hollway, Marion Hoffman, Alvaro Uzaheta, Kieran Mepham,
Timon Elmer, Mirko Reul</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/stocnet/goldfish/blob/develop/vignettes/teaching1.Rmd" class="external-link"><code>vignettes/teaching1.Rmd</code></a></small>
      <div class="hidden name"><code>teaching1.Rmd</code></div>

    </div>

    
    
<p>Example script analyzing the MIT Social Evolution data with
<code>R</code>’s <code>goldfish</code> package. Models inspired by
section 7 of:</p>
<blockquote>
<p>Stadtfeld &amp; Block (2017), “Interactions, Actors and Time: Dynamic
Network Actor Models for Relational Events”, Sociological Science, 2017,
4(1): 318-352. DOI: 10.15195/v4.a14</p>
</blockquote>
<div class="section level2">
<h2 id="step-0-load-package-and-data">Step 0: Load package and data<a class="anchor" aria-label="anchor" href="#step-0-load-package-and-data"></a>
</h2>
<p>First, we load the <code>goldfish</code> package and load the data.
The data is loaded using lazy loading, i.e., the objects are only
‘promised’ for the moment, but are available in the environment to be
used, and more information will appear as you use them. You can find out
more about this dataset, its format, and its origins in a couple of ERGM
papers by callings its documentation:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stocnet.github.io/goldfish/">goldfish</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"Social_Evolution"</span><span class="op">)</span></span>
<span><span class="co"># ?Social_Evolution</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">calls</span><span class="op">)</span></span>
<span><span class="co">#&gt;         time   sender receiver increment</span></span>
<span><span class="co">#&gt; 1 1220733470 Actor 72 Actor 50         1</span></span>
<span><span class="co">#&gt; 2 1221102974 Actor 43 Actor 51         1</span></span>
<span><span class="co">#&gt; 3 1221784293 Actor 43 Actor 51         1</span></span>
<span><span class="co">#&gt; 4 1221785882 Actor 43 Actor 22         1</span></span>
<span><span class="co">#&gt; 5 1221787264 Actor 43 Actor 55         1</span></span>
<span><span class="co">#&gt; 6 1221848443 Actor 43 Actor 51         1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">actors</span><span class="op">)</span></span>
<span><span class="co">#&gt;     label present floor gradeType</span></span>
<span><span class="co">#&gt; 1 Actor 1    TRUE     3         5</span></span>
<span><span class="co">#&gt; 2 Actor 2    TRUE     5         1</span></span>
<span><span class="co">#&gt; 3 Actor 3    TRUE     5         2</span></span>
<span><span class="co">#&gt; 4 Actor 4    TRUE     2         2</span></span>
<span><span class="co">#&gt; 5 Actor 5    TRUE     4         1</span></span>
<span><span class="co">#&gt; 6 Actor 6    TRUE     4         2</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="preamble-run-a-quick-dynam-in-six-lines">Preamble: Run a quick DyNAM in six lines<a class="anchor" aria-label="anchor" href="#preamble-run-a-quick-dynam-in-six-lines"></a>
</h2>
<p>We use an <code>R</code> version higher than 4.2.0 to compile the
vignettes. The native pipe operator is available in <code>R</code> from
version 4.1.0.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">callNetwork</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_network.html">make_network</a></span><span class="op">(</span>nodes <span class="op">=</span> <span class="va">actors</span>, directed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co"># 1</span></span>
<span>  <span class="fu"><a href="../reference/link_events.html">link_events</a></span><span class="op">(</span>change_events <span class="op">=</span> <span class="va">calls</span>, nodes <span class="op">=</span> <span class="va">actors</span><span class="op">)</span> <span class="co"># 2</span></span>
<span></span>
<span><span class="co"># 3</span></span>
<span><span class="va">callsDependent</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_dependent_events.html">make_dependent_events</a></span><span class="op">(</span></span>
<span>  events <span class="op">=</span> <span class="va">calls</span>, nodes <span class="op">=</span> <span class="va">actors</span>,</span>
<span>  default_network <span class="op">=</span> <span class="va">callNetwork</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># 4</span></span>
<span><span class="va">socialEvolutionData</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_data.html">make_data</a></span><span class="op">(</span><span class="va">callsDependent</span>, <span class="va">callNetwork</span>, <span class="va">actors</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 5</span></span>
<span><span class="va">mod00Rate</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/estimate.html">estimate_dynam</a></span><span class="op">(</span></span>
<span>  <span class="va">callsDependent</span> <span class="op">~</span> <span class="va">indeg</span> <span class="op">+</span> <span class="va">outdeg</span>,</span>
<span>  sub_model <span class="op">=</span> <span class="st">"rate"</span>,</span>
<span>  data <span class="op">=</span> <span class="va">socialEvolutionData</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mod00Rate</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; estimate_dynam(x = callsDependent ~ indeg + outdeg, sub_model = "rate", </span></span>
<span><span class="co">#&gt;     data = socialEvolutionData)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;        Estimate Std. Error z-value  Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; indeg  0.551445   0.066344  8.3119 &lt; 2.2e-16 ***</span></span>
<span><span class="co">#&gt; outdeg 0.263784   0.028386  9.2927 &lt; 2.2e-16 ***</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Converged with max abs. score of 2e-05 </span></span>
<span><span class="co">#&gt;   Log-Likelihood: -1750.9</span></span>
<span><span class="co">#&gt;   AIC:  3505.8 </span></span>
<span><span class="co">#&gt;   AICc: 3505.9 </span></span>
<span><span class="co">#&gt;   BIC:  3514 </span></span>
<span><span class="co">#&gt;   model: "DyNAM" subModel: "rate"</span></span>
<span></span>
<span><span class="va">mod00Choice</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/estimate.html">estimate_dynam</a></span><span class="op">(</span></span>
<span>  <span class="va">callsDependent</span> <span class="op">~</span> <span class="va">inertia</span> <span class="op">+</span> <span class="va">recip</span> <span class="op">+</span> <span class="va">trans</span>,</span>
<span>  sub_model <span class="op">=</span> <span class="st">"choice"</span>,</span>
<span>  data <span class="op">=</span> <span class="va">socialEvolutionData</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mod00Choice</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; estimate_dynam(x = callsDependent ~ inertia + recip + trans, </span></span>
<span><span class="co">#&gt;     sub_model = "choice", data = socialEvolutionData)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;         Estimate Std. Error z-value  Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; inertia  5.19690    0.17397 29.8725 &lt; 2.2e-16 ***</span></span>
<span><span class="co">#&gt; recip    1.39802    0.17300  8.0812 6.661e-16 ***</span></span>
<span><span class="co">#&gt; trans   -0.23036    0.21554 -1.0687    0.2852    </span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Converged with max abs. score of 7e-05 </span></span>
<span><span class="co">#&gt;   Log-Likelihood: -696.72</span></span>
<span><span class="co">#&gt;   AIC:  1399.4 </span></span>
<span><span class="co">#&gt;   AICc: 1399.5 </span></span>
<span><span class="co">#&gt;   BIC:  1411.7 </span></span>
<span><span class="co">#&gt;   model: "DyNAM" subModel: "choice"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="step-1-create-data-objects">Step 1: Create data objects<a class="anchor" aria-label="anchor" href="#step-1-create-data-objects"></a>
</h2>
<div class="section level3">
<h3 id="step-1a-make-node-sets-and-attributes">Step 1a: Make node set(s) and attributes<a class="anchor" aria-label="anchor" href="#step-1a-make-node-sets-and-attributes"></a>
</h3>
<p>We’ve loaded a dataset that defines its nodes and their attributes as
a data frame. Let’s check what we have first.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">actors</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "data.frame"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">actors</span><span class="op">)</span></span>
<span><span class="co">#&gt;     label present floor gradeType</span></span>
<span><span class="co">#&gt; 1 Actor 1    TRUE     3         5</span></span>
<span><span class="co">#&gt; 2 Actor 2    TRUE     5         1</span></span>
<span><span class="co">#&gt; 3 Actor 3    TRUE     5         2</span></span>
<span><span class="co">#&gt; 4 Actor 4    TRUE     2         2</span></span>
<span><span class="co">#&gt; 5 Actor 5    TRUE     4         1</span></span>
<span><span class="co">#&gt; 6 Actor 6    TRUE     4         2</span></span></code></pre></div>
<p>Note that there are four column variables: <code>label</code> the
identifier, <code>present</code>, the <code>floor</code> of residence,
and <code>gradeType</code> their educational level (1 = freshmen to 5 =
graduate). All of these columns will be recognized as individual
attributes by goldfish.</p>
<p>We need to make them as nodes so that <code>goldfish</code> knows
what to do with them.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">actors</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_nodes.html">make_nodes</a></span><span class="op">(</span><span class="va">actors</span><span class="op">)</span></span>
<span><span class="va">actors</span></span>
<span><span class="co">#&gt; Number of nodes: 84 </span></span>
<span><span class="co">#&gt; Number of present nodes: 84 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; First 6 rows</span></span>
<span><span class="co">#&gt;     label present floor gradeType</span></span>
<span><span class="co">#&gt; 1 Actor 1    TRUE     3         5</span></span>
<span><span class="co">#&gt; 2 Actor 2    TRUE     5         1</span></span>
<span><span class="co">#&gt; 3 Actor 3    TRUE     5         2</span></span>
<span><span class="co">#&gt; 4 Actor 4    TRUE     2         2</span></span>
<span><span class="co">#&gt; 5 Actor 5    TRUE     4         1</span></span>
<span><span class="co">#&gt; 6 Actor 6    TRUE     4         2</span></span></code></pre></div>
<p>As you can see, the structure is the same, so we can still treat it
like a data frame, but the added class helps goldfish interpret the data
frame correctly.</p>
</div>
<div class="section level3">
<h3 id="step-1b-make-networks">Step 1b: Make networks<a class="anchor" aria-label="anchor" href="#step-1b-make-networks"></a>
</h3>
<p>Next we want to define the dyadic or network elements: calls between
our actors.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">calls</span><span class="op">)</span></span>
<span><span class="co">#&gt;         time   sender receiver increment</span></span>
<span><span class="co">#&gt; 1 1220733470 Actor 72 Actor 50         1</span></span>
<span><span class="co">#&gt; 2 1221102974 Actor 43 Actor 51         1</span></span>
<span><span class="co">#&gt; 3 1221784293 Actor 43 Actor 51         1</span></span>
<span><span class="co">#&gt; 4 1221785882 Actor 43 Actor 22         1</span></span>
<span><span class="co">#&gt; 5 1221787264 Actor 43 Actor 55         1</span></span>
<span><span class="co">#&gt; 6 1221848443 Actor 43 Actor 51         1</span></span></code></pre></div>
<p>Note there are columns for <code>time</code>, <code>sender</code>,
and <code>receiver</code>. <code>increment</code> is a reserved
column.</p>
<p>To tell goldfish this is a network, we must make it as such:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">make_network</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">callNetwork</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_network.html">make_network</a></span><span class="op">(</span>nodes <span class="op">=</span> <span class="va">actors</span>, directed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>The argument <code>directed</code> is <code>TRUE</code> by default,
but we need to specify the nodes so that <code>goldfish</code> can check
for consistency and relate it to that nodeset as needed.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">callNetwork</span></span>
<span><span class="co">#&gt; Dimensions: 84 84 </span></span>
<span><span class="co">#&gt; Number of ties (no weighted): 0 </span></span>
<span><span class="co">#&gt; Nodes set(s): actors </span></span>
<span><span class="co">#&gt; It is a one-mode and directed network</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; First 6 rows and columns</span></span>
<span><span class="co">#&gt;          receiver</span></span>
<span><span class="co">#&gt; sender    Actor 1 Actor 2 Actor 3 Actor 4 Actor 5 Actor 6</span></span>
<span><span class="co">#&gt;   Actor 1       0       0       0       0       0       0</span></span>
<span><span class="co">#&gt;   Actor 2       0       0       0       0       0       0</span></span>
<span><span class="co">#&gt;   Actor 3       0       0       0       0       0       0</span></span>
<span><span class="co">#&gt;   Actor 4       0       0       0       0       0       0</span></span>
<span><span class="co">#&gt;   Actor 5       0       0       0       0       0       0</span></span>
<span><span class="co">#&gt;   Actor 6       0       0       0       0       0       0</span></span></code></pre></div>
<p>Note that we have not added any network data yet. By default,
<code><a href="../reference/make_network.html">make_network()</a></code> just constructs an empty matrix with
dimensions defined by the length of the nodeset(s). So we have an empty
network as a starting state.</p>
<p>Now that goldfish recognizes the matrix as a network, we can also
associate an event list that updates it. To do this we use the
<code><a href="../reference/link_events.html">link_events()</a></code> function, which requires us to identify a
goldfish object to be updated, the events that update it and, in this
case, also the nodes that the events should relate to.
<code>goldfish</code> checks the consistency of all this information and
relates these objects to one another so that information can be called
as needed.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">link_events</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">callNetwork</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/link_events.html">link_events</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">callNetwork</span>,</span>
<span>  change_events <span class="op">=</span> <span class="va">calls</span>,</span>
<span>  nodes <span class="op">=</span> <span class="va">actors</span></span>
<span><span class="op">)</span></span>
<span><span class="va">callNetwork</span></span>
<span><span class="co">#&gt; Dimensions: 84 84 </span></span>
<span><span class="co">#&gt; Number of ties (no weighted): 0 </span></span>
<span><span class="co">#&gt; Nodes set(s): actors </span></span>
<span><span class="co">#&gt; It is a one-mode and directed network</span></span>
<span><span class="co">#&gt; Linked events: calls </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; First 6 rows and columns</span></span>
<span><span class="co">#&gt;          receiver</span></span>
<span><span class="co">#&gt; sender    Actor 1 Actor 2 Actor 3 Actor 4 Actor 5 Actor 6</span></span>
<span><span class="co">#&gt;   Actor 1       0       0       0       0       0       0</span></span>
<span><span class="co">#&gt;   Actor 2       0       0       0       0       0       0</span></span>
<span><span class="co">#&gt;   Actor 3       0       0       0       0       0       0</span></span>
<span><span class="co">#&gt;   Actor 4       0       0       0       0       0       0</span></span>
<span><span class="co">#&gt;   Actor 5       0       0       0       0       0       0</span></span>
<span><span class="co">#&gt;   Actor 6       0       0       0       0       0       0</span></span></code></pre></div>
<div class="section level4">
<h4 id="task">Task<a class="anchor" aria-label="anchor" href="#task"></a>
</h4>
<p>You should now be able to do the same with the friendship nomination
network/event list. See the familiar columns <code>time</code>,
<code>sender</code>, and <code>receiver</code>. The new column,
<code>replace</code>, is an alternative treatment to
<code>increment</code>. When an event occurs, goldfish will replace the
value in the relevant cell with the value in this column instead of
incrementing it. Friendship is thus a binary network.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">friendship</span><span class="op">)</span></span>
<span><span class="co">#&gt;         time   sender receiver replace</span></span>
<span><span class="co">#&gt; 1 1220918400 Actor 47  Actor 2       1</span></span>
<span><span class="co">#&gt; 3 1220918400 Actor 57  Actor 2       1</span></span>
<span><span class="co">#&gt; 4 1220918400  Actor 9 Actor 38       1</span></span>
<span><span class="co">#&gt; 5 1220918400 Actor 68 Actor 40       1</span></span>
<span><span class="co">#&gt; 6 1220918400 Actor 23 Actor 40       1</span></span>
<span><span class="co">#&gt; 7 1220918400 Actor 49 Actor 40       1</span></span>
<span><span class="va">friendshipNetwork</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_network.html">make_network</a></span><span class="op">(</span>nodes <span class="op">=</span> <span class="va">actors</span>, directed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">friendshipNetwork</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/link_events.html">link_events</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">friendshipNetwork</span>,</span>
<span>  change_events <span class="op">=</span> <span class="va">friendship</span>,</span>
<span>  nodes <span class="op">=</span> <span class="va">actors</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">friendshipNetwork</span></span>
<span><span class="co">#&gt; Dimensions: 84 84 </span></span>
<span><span class="co">#&gt; Number of ties (no weighted): 0 </span></span>
<span><span class="co">#&gt; Nodes set(s): actors </span></span>
<span><span class="co">#&gt; It is a one-mode and directed network</span></span>
<span><span class="co">#&gt; Linked events: friendship </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; First 6 rows and columns</span></span>
<span><span class="co">#&gt;          receiver</span></span>
<span><span class="co">#&gt; sender    Actor 1 Actor 2 Actor 3 Actor 4 Actor 5 Actor 6</span></span>
<span><span class="co">#&gt;   Actor 1       0       0       0       0       0       0</span></span>
<span><span class="co">#&gt;   Actor 2       0       0       0       0       0       0</span></span>
<span><span class="co">#&gt;   Actor 3       0       0       0       0       0       0</span></span>
<span><span class="co">#&gt;   Actor 4       0       0       0       0       0       0</span></span>
<span><span class="co">#&gt;   Actor 5       0       0       0       0       0       0</span></span>
<span><span class="co">#&gt;   Actor 6       0       0       0       0       0       0</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="step-1c-make-dependent-events">Step 1c: Make dependent events<a class="anchor" aria-label="anchor" href="#step-1c-make-dependent-events"></a>
</h3>
<p>The following step in defining the data objects is to identify the
dependent events. Here we would like to model as the dependent variable
the calls between individuals. We specify the event list and the node
list.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">make_dependent_events</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">callsDependent</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_dependent_events.html">make_dependent_events</a></span><span class="op">(</span></span>
<span>  events <span class="op">=</span> <span class="va">calls</span>, nodes <span class="op">=</span> <span class="va">actors</span>,</span>
<span>  default_network <span class="op">=</span> <span class="va">callNetwork</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">callsDependent</span></span>
<span><span class="co">#&gt; Number of events: 439 </span></span>
<span><span class="co">#&gt; Nodes set(s): actors </span></span>
<span><span class="co">#&gt; Default network: callNetwork </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; First 6 rows</span></span>
<span><span class="co">#&gt;         time   sender receiver increment</span></span>
<span><span class="co">#&gt; 1 1220733470 Actor 72 Actor 50         1</span></span>
<span><span class="co">#&gt; 2 1221102974 Actor 43 Actor 51         1</span></span>
<span><span class="co">#&gt; 3 1221784293 Actor 43 Actor 51         1</span></span>
<span><span class="co">#&gt; 4 1221785882 Actor 43 Actor 22         1</span></span>
<span><span class="co">#&gt; 5 1221787264 Actor 43 Actor 55         1</span></span>
<span><span class="co">#&gt; 6 1221848443 Actor 43 Actor 51         1</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-1d-make-data-object">Step 1d: Make data object<a class="anchor" aria-label="anchor" href="#step-1d-make-data-object"></a>
</h3>
<p>Now that we have all the objects we need, we can make the data
object. The data object is a goldfish object that contains all the
information needed to estimate the model. So, it is a container for the
dependent events, the networks, and the nodes containing all the
information of the dependent events and any dyadic or nodal covariate
used as explanatory variables in the model.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">make_data</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">socialEvolutionData</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_data.html">make_data</a></span><span class="op">(</span></span>
<span>  <span class="va">callsDependent</span>, <span class="va">callNetwork</span>, <span class="va">actors</span>, <span class="va">friendshipNetwork</span></span>
<span><span class="op">)</span></span>
<span><span class="va">socialEvolutionData</span></span>
<span><span class="co">#&gt; Goldfish Data Environment</span></span>
<span><span class="co">#&gt; =========================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --- Nodesets ---</span></span>
<span><span class="co">#&gt;         n attributes linked_events</span></span>
<span><span class="co">#&gt; actors 84          3              </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --- Networks ---</span></span>
<span><span class="co">#&gt;                   dimensions nodeset linked_events directed two_mode</span></span>
<span><span class="co">#&gt; callNetwork            84x84  actors         calls     TRUE    FALSE</span></span>
<span><span class="co">#&gt; friendshipNetwork      84x84  actors    friendship     TRUE    FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --- Dependent Events ---</span></span>
<span><span class="co">#&gt;                n_events default_network nodeset</span></span>
<span><span class="co">#&gt; callsDependent      439     callNetwork  actors</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --- Events Data Frames ---</span></span>
<span><span class="co">#&gt;            n_events object_type update_mode</span></span>
<span><span class="co">#&gt; calls           439      dyadic   increment</span></span>
<span><span class="co">#&gt; friendship      766      dyadic     replace</span></span></code></pre></div>
<div class="section level4">
<h4 id="intermediate-step-visualization">Intermediate step: Visualization<a class="anchor" aria-label="anchor" href="#intermediate-step-visualization"></a>
</h4>
<p>While not a required part of the modeling process, we highly
recommend the visualization of your data for analytic and diagnostic
purposes. <code>goldfish</code> includes wrappers for base
<code>R</code> commands to help extract monadic and dyadic information
for certain time points, <code><a href="../reference/update-method.html">?as.data.frame.nodes.goldfish</a></code> and
<code><a href="../reference/update-method.html">?as.matrix.network.goldfish</a></code>.</p>
<p>We can use these functions to visually compare our network at two (or
more) different time periods using <code>migraph</code>. See the
<code>migraph</code> package documentation for additional information
about network visualization.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r.igraph.org/" class="external-link">igraph</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggraph.data-imaginist.com" class="external-link">ggraph</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stocnet.github.io/migraph/" class="external-link">migraph</a></span><span class="op">)</span></span>
<span><span class="co"># The network at the beginning</span></span>
<span><span class="va">callNetworkBgn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">callNetwork</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://stocnet.github.io/manynet/reference/map_graphr.html" class="external-link">graphr</a></span><span class="op">(</span><span class="va">callNetworkBgn</span>, labels <span class="op">=</span> <span class="cn">FALSE</span>, layout <span class="op">=</span> <span class="st">"fr"</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="teaching/plot-teaching1-1.png" alt="plot of chunk plot-teaching1"><div class="figcaption">plot of chunk plot-teaching1</div>
</div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># The network at half time</span></span>
<span><span class="va">callNetworkHlf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span></span>
<span>  <span class="va">callNetwork</span>,</span>
<span>  time <span class="op">=</span> <span class="va">calls</span><span class="op">$</span><span class="va">time</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">floor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">calls</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://stocnet.github.io/manynet/reference/manip_as.html" class="external-link">as_igraph</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://stocnet.github.io/manynet/reference/manip_nodes.html" class="external-link">add_node_attribute</a></span><span class="op">(</span><span class="st">"floor"</span>, <span class="va">actors</span><span class="op">$</span><span class="va">floor</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://stocnet.github.io/manynet/reference/map_graphr.html" class="external-link">graphr</a></span><span class="op">(</span><span class="va">callNetworkHlf</span>, labels <span class="op">=</span> <span class="cn">FALSE</span>, layout <span class="op">=</span> <span class="st">"fr"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geom_node_point.html" class="external-link">geom_node_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">floor</span><span class="op">)</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">2</span>, show.legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="teaching/plot-teaching1-2.png" alt="plot of chunk plot-teaching1"><div class="figcaption">plot of chunk plot-teaching1</div>
</div>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># The network at the end</span></span>
<span><span class="va">callNetworkEnd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">callNetwork</span>, time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">calls</span><span class="op">$</span><span class="va">time</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://stocnet.github.io/manynet/reference/manip_as.html" class="external-link">as_igraph</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://stocnet.github.io/manynet/reference/manip_nodes.html" class="external-link">add_node_attribute</a></span><span class="op">(</span><span class="st">"floor"</span>, <span class="va">actors</span><span class="op">$</span><span class="va">floor</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://stocnet.github.io/manynet/reference/map_graphr.html" class="external-link">graphr</a></span><span class="op">(</span><span class="va">callNetworkEnd</span>, labels <span class="op">=</span> <span class="cn">FALSE</span>, layout <span class="op">=</span> <span class="st">"fr"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geom_node_point.html" class="external-link">geom_node_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">floor</span><span class="op">)</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">2</span>, show.legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="teaching/plot-teaching1-3.png" alt="plot of chunk plot-teaching1"><div class="figcaption">plot of chunk plot-teaching1</div>
</div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span></span>
<span><span class="co"># The tie strength at the end</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">callNetwork</span>, time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">calls</span><span class="op">$</span><span class="va">time</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    0    1    2    3    4    6    7    8    9   10   11   13   15   64  115 </span></span>
<span><span class="co">#&gt; 6972   36   13   10    8    1    5    3    1    1    1    2    1    1    1</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="step-2-specify-and-estimate-model">Step 2: Specify and estimate model<a class="anchor" aria-label="anchor" href="#step-2-specify-and-estimate-model"></a>
</h2>
<p>The second step is to specify and fit a model to this data. This step
can be broken up into several stages:</p>
<ul>
<li><p><strong>Step 2a</strong>. <em>Formula</em>: Specify a model
formula from the effects and variables available</p></li>
<li><p><strong>Step 2b</strong>. <em>Preprocessing</em>: Calculate the
change statistics associated with these effects</p></li>
<li><p><strong>Step 2c</strong>. <em>Estimation</em>: Fit an appropriate
model to these statistics</p></li>
</ul>
<p>However, in goldfish we also have the option of accelerating this
process and using memory more efficiently by combining these three
sub-steps in one. Nonetheless, it can be helpful to think of 2a
separately, and recognize steps 2b and 2c as goldfish does them.</p>
<div class="section level3">
<h3 id="step-2a--formula">Step 2a. Formula<a class="anchor" aria-label="anchor" href="#step-2a--formula"></a>
</h3>
<p>We specify our model using the standard R formula format like:</p>
<p><code>goldfish_dependent ~ effects(process_state_element)</code></p>
<p>We can see which effects are currently available and how to specify
them here:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/vignette.html" class="external-link">vignette</a></span><span class="op">(</span><span class="st">"goldfishEffects"</span><span class="op">)</span></span></code></pre></div>
<p>Let’s start with the simplest model we can imagine:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">simpleFormulaChoice</span> <span class="op">&lt;-</span> <span class="va">callsDependent</span> <span class="op">~</span> <span class="fu">tie</span><span class="op">(</span><span class="va">friendshipNetwork</span><span class="op">)</span></span></code></pre></div>
<p>What are we testing here? Do individuals call their friends more than
non-friends?</p>
</div>
<div class="section level3">
<h3 id="step-2b-and-2c--preprocessing-and-estimation">Step 2b and 2c. Preprocessing and Estimation<a class="anchor" aria-label="anchor" href="#step-2b-and-2c--preprocessing-and-estimation"></a>
</h3>
<p>Now to estimate this model, we use the <code><a href="../reference/estimate.html">?estimate</a></code>
function. For now, only need to worry about the <code>formula</code> and
the <code>model</code>, <code>subModel</code> type (DyNAM-choice).</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod01Choice</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/estimate.html">estimate_dynam</a></span><span class="op">(</span></span>
<span>  <span class="va">simpleFormulaChoice</span>,</span>
<span>  sub_model <span class="op">=</span> <span class="st">"choice"</span>,</span>
<span>  data <span class="op">=</span> <span class="va">socialEvolutionData</span></span>
<span>  <span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mod01Choice</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; estimate_dynam(x = callsDependent ~ tie(friendshipNetwork), sub_model = "choice", </span></span>
<span><span class="co">#&gt;     data = socialEvolutionData)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;     Estimate Std. Error z-value  Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; tie  4.02538    0.12513   32.17 &lt; 2.2e-16 ***</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Converged with max abs. score of 0 </span></span>
<span><span class="co">#&gt;   Log-Likelihood: -1288.7</span></span>
<span><span class="co">#&gt;   AIC:  2579.4 </span></span>
<span><span class="co">#&gt;   AICc: 2579.4 </span></span>
<span><span class="co">#&gt;   BIC:  2583.5 </span></span>
<span><span class="co">#&gt;   model: "DyNAM" subModel: "choice"</span></span></code></pre></div>
<p>Ok, as fascinating as that was, perhaps we can test how robust this
finding is in the presence of plausible controls.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">complexFormulaChoice</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">callsDependent</span> <span class="op">~</span> <span class="fu">inertia</span><span class="op">(</span><span class="va">callNetwork</span><span class="op">)</span> <span class="op">+</span> <span class="fu">recip</span><span class="op">(</span><span class="va">callNetwork</span><span class="op">)</span> <span class="op">+</span></span>
<span>                   <span class="fu">tie</span><span class="op">(</span><span class="va">friendshipNetwork</span><span class="op">)</span> <span class="op">+</span> <span class="fu">recip</span><span class="op">(</span><span class="va">friendshipNetwork</span><span class="op">)</span> <span class="op">+</span></span>
<span>                   <span class="fu">same</span><span class="op">(</span><span class="va">actors</span><span class="op">$</span><span class="va">gradeType</span><span class="op">)</span> <span class="op">+</span> <span class="fu">same</span><span class="op">(</span><span class="va">actors</span><span class="op">$</span><span class="va">floor</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mod02Choice</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/estimate.html">estimate_dynam</a></span><span class="op">(</span></span>
<span>  <span class="va">complexFormulaChoice</span>,</span>
<span>  sub_model <span class="op">=</span> <span class="st">"choice"</span>,</span>
<span>  data <span class="op">=</span> <span class="va">socialEvolutionData</span></span>
<span>  <span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mod02Choice</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; estimate_dynam(x = callsDependent ~ inertia(callNetwork) + recip(callNetwork) + </span></span>
<span><span class="co">#&gt;     tie(friendshipNetwork) + recip(friendshipNetwork) + same(actors$gradeType) + </span></span>
<span><span class="co">#&gt;     same(actors$floor), sub_model = "choice", data = socialEvolutionData)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Effects details:</span></span>
<span><span class="co">#&gt;         Object           </span></span>
<span><span class="co">#&gt; inertia callNetwork      </span></span>
<span><span class="co">#&gt; recip   callNetwork      </span></span>
<span><span class="co">#&gt; tie     friendshipNetwork</span></span>
<span><span class="co">#&gt; recip   friendshipNetwork</span></span>
<span><span class="co">#&gt; same    actors$gradeType </span></span>
<span><span class="co">#&gt; same    actors$floor     </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;         Estimate Std. Error z-value  Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; inertia  4.42057    0.19225 22.9936 &lt; 2.2e-16 ***</span></span>
<span><span class="co">#&gt; recip    0.27151    0.19735  1.3758  0.168895    </span></span>
<span><span class="co">#&gt; tie      1.28779    0.25673  5.0160 5.275e-07 ***</span></span>
<span><span class="co">#&gt; recip    0.68625    0.22930  2.9928  0.002765 ** </span></span>
<span><span class="co">#&gt; same     0.69847    0.17607  3.9670 7.279e-05 ***</span></span>
<span><span class="co">#&gt; same    -0.28700    0.16618 -1.7271  0.084155 .  </span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Converged with max abs. score of 0 </span></span>
<span><span class="co">#&gt;   Log-Likelihood: -637.96</span></span>
<span><span class="co">#&gt;   AIC:  1287.9 </span></span>
<span><span class="co">#&gt;   AICc: 1288.1 </span></span>
<span><span class="co">#&gt;   BIC:  1312.4 </span></span>
<span><span class="co">#&gt;   model: "DyNAM" subModel: "choice"</span></span></code></pre></div>
<div class="section level4">
<h4 id="rate-model">Rate model<a class="anchor" aria-label="anchor" href="#rate-model"></a>
</h4>
<p>How do individual properties affect the rate of action of
individuals? (Step 1 of the model)</p>
<p>Let us again define a simple formula that only depends on
individuals’ degree in the friendship network</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">simpleFormulaRate</span> <span class="op">&lt;-</span> <span class="va">callsDependent</span> <span class="op">~</span> <span class="fu">indeg</span><span class="op">(</span><span class="va">friendshipNetwork</span><span class="op">)</span></span>
<span><span class="va">mod01Rate</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/estimate.html">estimate_dynam</a></span><span class="op">(</span></span>
<span>  <span class="va">simpleFormulaRate</span>,</span>
<span>  sub_model <span class="op">=</span> <span class="st">"rate"</span>,</span>
<span>  data <span class="op">=</span> <span class="va">socialEvolutionData</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="section level5">
<h5 id="remark">Remark:<a class="anchor" aria-label="anchor" href="#remark"></a>
</h5>
<p>Sometimes, the default values for the algorithm are not enough to
reach convergence. The default values for the estimation algorithm are
set by the function <code><a href="../reference/set_estimation_opt.html">set_estimation_opt()</a></code>, you can take a
look to the different arguments and options that can be modified for the
estimation algorithm taking a look to its documentation. We can remedy
this by increasing the number of iterations setting a different value
using the <code>control_estimation</code> argument:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod01Rate</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/estimate.html">estimate_dynam</a></span><span class="op">(</span></span>
<span>  <span class="va">simpleFormulaRate</span>,</span>
<span>  sub_model <span class="op">=</span> <span class="st">"rate"</span>,</span>
<span>  data <span class="op">=</span> <span class="va">socialEvolutionData</span>,</span>
<span>  control_estimation <span class="op">=</span> <span class="fu"><a href="../reference/set_estimation_opt.html">set_estimation_opt</a></span><span class="op">(</span>max_iterations <span class="op">=</span> <span class="fl">40</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mod01Rate</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; estimate_dynam(x = callsDependent ~ indeg(friendshipNetwork), </span></span>
<span><span class="co">#&gt;     sub_model = "rate", data = socialEvolutionData, control_estimation = set_estimation_opt(max_iterations = 40))</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;       Estimate Std. Error z-value  Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; indeg 0.157370   0.012699  12.392 &lt; 2.2e-16 ***</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Converged with max abs. score of 0 </span></span>
<span><span class="co">#&gt;   Log-Likelihood: -1868.1</span></span>
<span><span class="co">#&gt;   AIC:  3738.3 </span></span>
<span><span class="co">#&gt;   AICc: 3738.3 </span></span>
<span><span class="co">#&gt;   BIC:  3742.3 </span></span>
<span><span class="co">#&gt;   model: "DyNAM" subModel: "rate"</span></span></code></pre></div>
<p>What if we include additional structural effects? Let us add the in
and out degree of the nodes in the call network</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">complexFormulaRate</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">callsDependent</span> <span class="op">~</span> <span class="fu">indeg</span><span class="op">(</span><span class="va">callNetwork</span><span class="op">)</span> <span class="op">+</span> <span class="fu">outdeg</span><span class="op">(</span><span class="va">callNetwork</span><span class="op">)</span> <span class="op">+</span></span>
<span>                   <span class="fu">indeg</span><span class="op">(</span><span class="va">friendshipNetwork</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mod02Rate</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/estimate.html">estimate_dynam</a></span><span class="op">(</span></span>
<span>  <span class="va">complexFormulaRate</span>,</span>
<span>  sub_model <span class="op">=</span> <span class="st">"rate"</span>,</span>
<span>  data <span class="op">=</span> <span class="va">socialEvolutionData</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mod02Rate</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; estimate_dynam(x = callsDependent ~ indeg(callNetwork) + outdeg(callNetwork) + </span></span>
<span><span class="co">#&gt;     indeg(friendshipNetwork), sub_model = "rate", data = socialEvolutionData)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Effects details:</span></span>
<span><span class="co">#&gt;        Object           </span></span>
<span><span class="co">#&gt; indeg  callNetwork      </span></span>
<span><span class="co">#&gt; outdeg callNetwork      </span></span>
<span><span class="co">#&gt; indeg  friendshipNetwork</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;        Estimate Std. Error z-value  Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; indeg  0.454676   0.070918  6.4113 1.443e-10 ***</span></span>
<span><span class="co">#&gt; outdeg 0.240231   0.029494  8.1452 4.441e-16 ***</span></span>
<span><span class="co">#&gt; indeg  0.060809   0.015464  3.9324 8.409e-05 ***</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Converged with max abs. score of 2e-05 </span></span>
<span><span class="co">#&gt;   Log-Likelihood: -1743.2</span></span>
<span><span class="co">#&gt;   AIC:  3492.5 </span></span>
<span><span class="co">#&gt;   AICc: 3492.5 </span></span>
<span><span class="co">#&gt;   BIC:  3504.7 </span></span>
<span><span class="co">#&gt;   model: "DyNAM" subModel: "rate"</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="right-censored-intervals">Right-censored intervals<a class="anchor" aria-label="anchor" href="#right-censored-intervals"></a>
</h5>
<p>Recall that it is important to add a time intercept when estimating
models with right-censored intervals (as discussed in Stadtfeld &amp;
Block, 2017). Adding an intercept is as easy as including a 1 to the
formula:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">interceptFormulaRate</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">callsDependent</span> <span class="op">~</span> <span class="fl">1</span> <span class="op">+</span> <span class="fu">indeg</span><span class="op">(</span><span class="va">callNetwork</span><span class="op">)</span> <span class="op">+</span> <span class="fu">outdeg</span><span class="op">(</span><span class="va">callNetwork</span><span class="op">)</span> <span class="op">+</span></span>
<span>                   <span class="fu">indeg</span><span class="op">(</span><span class="va">friendshipNetwork</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mod03Rate</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/estimate.html">estimate_dynam</a></span><span class="op">(</span></span>
<span>  <span class="va">interceptFormulaRate</span>,</span>
<span>  sub_model <span class="op">=</span> <span class="st">"rate"</span>,</span>
<span>  data <span class="op">=</span> <span class="va">socialEvolutionData</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mod03Rate</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; estimate_dynam(x = callsDependent ~ 1 + indeg(callNetwork) + </span></span>
<span><span class="co">#&gt;     outdeg(callNetwork) + indeg(friendshipNetwork), sub_model = "rate", </span></span>
<span><span class="co">#&gt;     data = socialEvolutionData)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Effects details:</span></span>
<span><span class="co">#&gt;           Object           </span></span>
<span><span class="co">#&gt; Intercept                  </span></span>
<span><span class="co">#&gt; indeg     callNetwork      </span></span>
<span><span class="co">#&gt; outdeg    callNetwork      </span></span>
<span><span class="co">#&gt; indeg     friendshipNetwork</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;             Estimate Std. Error   z-value  Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; Intercept -14.380373   0.095669 -150.3135 &lt; 2.2e-16 ***</span></span>
<span><span class="co">#&gt; indeg       0.695555   0.063115   11.0204 &lt; 2.2e-16 ***</span></span>
<span><span class="co">#&gt; outdeg      0.234633   0.030153    7.7814 7.105e-15 ***</span></span>
<span><span class="co">#&gt; indeg       0.054792   0.015049    3.6409 0.0002716 ***</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Converged with max abs. score of 0 </span></span>
<span><span class="co">#&gt;   Log-Likelihood: -6003.1</span></span>
<span><span class="co">#&gt;   AIC:  12014 </span></span>
<span><span class="co">#&gt;   AICc: 12014 </span></span>
<span><span class="co">#&gt;   BIC:  12031 </span></span>
<span><span class="co">#&gt;   model: "DyNAM" subModel: "rate"</span></span></code></pre></div>
<p>Note that
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi>/</mi><mo>exp</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>β</mi><mrow><mi>i</mi><mi>n</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>c</mi><mi>e</mi><mi>p</mi><mi>t</mi></mrow></msub><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">1 / \exp({\beta_{intercept}})</annotation></semantics></math>
is the waiting time without any covariates, or how long it takes to make
the next phone call if everything else is set to 0. Therefore, the
larger the intercept the shorter the waiting time. For example, an
intercept of -14 means a waiting time of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi>/</mi><msup><mi>e</mi><mrow><mo>−</mo><mn>14</mn></mrow></msup><mo>=</mo><mn>334</mn></mrow><annotation encoding="application/x-tex">1 / e^{-14} = 334</annotation></semantics></math>
hours. The baseline waiting time between two events in hours:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod03RateCoef</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">mod03Rate</span><span class="op">)</span></span>
<span><span class="fl">1</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">mod03RateCoef</span><span class="op">[[</span><span class="st">"Intercept"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">/</span> <span class="fl">3600</span></span>
<span><span class="co">#&gt; [1] 488.6682</span></span>
<span><span class="co"># or days:</span></span>
<span><span class="fl">1</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">mod03RateCoef</span><span class="op">[[</span><span class="st">"Intercept"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">/</span> <span class="fl">86400</span></span>
<span><span class="co">#&gt; [1] 20.36118</span></span>
<span></span>
<span><span class="co"># But what if it is not just a random call?</span></span>
<span><span class="co"># Expected waiting time of those who have five outgoing call ties</span></span>
<span><span class="co"># (five different actors)</span></span>
<span><span class="fl">1</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span></span>
<span>  <span class="va">mod03RateCoef</span><span class="op">[[</span><span class="st">"Intercept"</span><span class="op">]</span><span class="op">]</span> <span class="op">+</span> <span class="va">mod03RateCoef</span><span class="op">[[</span><span class="st">"outdeg"</span><span class="op">]</span><span class="op">]</span> <span class="op">*</span> <span class="fl">5</span></span>
<span>  <span class="op">)</span> <span class="op">/</span> <span class="fl">3600</span></span>
<span><span class="co">#&gt; [1] 151.1872</span></span>
<span><span class="co"># Expected waiting time of those who have five outgoing and incoming call ties</span></span>
<span><span class="co"># (five different actors)</span></span>
<span><span class="fl">1</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span></span>
<span>  <span class="va">mod03RateCoef</span><span class="op">[[</span><span class="st">"Intercept"</span><span class="op">]</span><span class="op">]</span> <span class="op">+</span></span>
<span>    <span class="va">mod03RateCoef</span><span class="op">[[</span><span class="st">"outdeg"</span><span class="op">]</span><span class="op">]</span> <span class="op">*</span> <span class="fl">5</span> <span class="op">+</span></span>
<span>    <span class="va">mod03RateCoef</span><span class="op">[[</span><span class="st">"indeg"</span><span class="op">]</span><span class="op">]</span> <span class="op">*</span> <span class="fl">5</span></span>
<span>  <span class="op">)</span> <span class="op">/</span> <span class="fl">3600</span></span>
<span><span class="co">#&gt; [1] 4.66806</span></span></code></pre></div>
</div>
</div>
<div class="section level4">
<h4 id="windows-effects">Windows effects<a class="anchor" aria-label="anchor" href="#windows-effects"></a>
</h4>
<p>Remember our <code>callNetwork</code> process state accumulates
actions in time, but some older actions may no longer be relevant to
current action. Let’s see whether it is really just recent partners that
matter by adding extra effects with a window of… how long? Let us try 5
minutes
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><mn>5</mn><mo>*</mo><mn>60</mn><mo>=</mo><mn>300</mn><mi>s</mi></mrow><annotation encoding="application/x-tex">= 5 * 60 = 300s</annotation></semantics></math></p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">windowFormulaRate</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">callsDependent</span> <span class="op">~</span> <span class="fl">1</span> <span class="op">+</span> <span class="fu">indeg</span><span class="op">(</span><span class="va">callNetwork</span><span class="op">)</span> <span class="op">+</span> <span class="fu">outdeg</span><span class="op">(</span><span class="va">callNetwork</span><span class="op">)</span> <span class="op">+</span></span>
<span>                   <span class="fu">indeg</span><span class="op">(</span><span class="va">callNetwork</span>, window <span class="op">=</span> <span class="fl">300</span><span class="op">)</span> <span class="op">+</span></span>
<span>                   <span class="fu">outdeg</span><span class="op">(</span><span class="va">callNetwork</span>, window <span class="op">=</span> <span class="fl">300</span><span class="op">)</span> <span class="op">+</span></span>
<span>                   <span class="fu">indeg</span><span class="op">(</span><span class="va">friendshipNetwork</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mod04Rate</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/estimate.html">estimate_dynam</a></span><span class="op">(</span></span>
<span>  <span class="va">windowFormulaRate</span>,</span>
<span>  sub_model <span class="op">=</span> <span class="st">"rate"</span>,</span>
<span>  data <span class="op">=</span> <span class="va">socialEvolutionData</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mod04Rate</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; estimate_dynam(x = callsDependent ~ 1 + indeg(callNetwork) + </span></span>
<span><span class="co">#&gt;     outdeg(callNetwork) + indeg(callNetwork, window = 300) + </span></span>
<span><span class="co">#&gt;     outdeg(callNetwork, window = 300) + indeg(friendshipNetwork), </span></span>
<span><span class="co">#&gt;     sub_model = "rate", data = socialEvolutionData)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Effects details:</span></span>
<span><span class="co">#&gt;           Object            window</span></span>
<span><span class="co">#&gt; Intercept                         </span></span>
<span><span class="co">#&gt; indeg     callNetwork             </span></span>
<span><span class="co">#&gt; outdeg    callNetwork             </span></span>
<span><span class="co">#&gt; indeg     callNetwork       300   </span></span>
<span><span class="co">#&gt; outdeg    callNetwork       300   </span></span>
<span><span class="co">#&gt; indeg     friendshipNetwork       </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;             Estimate Std. Error   z-value  Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; Intercept -14.530750   0.101676 -142.9125 &lt; 2.2e-16 ***</span></span>
<span><span class="co">#&gt; indeg       0.245045   0.070682    3.4669 0.0005266 ***</span></span>
<span><span class="co">#&gt; outdeg      0.364576   0.032556   11.1985 &lt; 2.2e-16 ***</span></span>
<span><span class="co">#&gt; indeg       5.295709   0.139463   37.9722 &lt; 2.2e-16 ***</span></span>
<span><span class="co">#&gt; outdeg     -0.767499   0.116642   -6.5800 4.706e-11 ***</span></span>
<span><span class="co">#&gt; indeg       0.083772   0.015289    5.4794 4.268e-08 ***</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Converged with max abs. score of 1e-05 </span></span>
<span><span class="co">#&gt;   Log-Likelihood: -5475.9</span></span>
<span><span class="co">#&gt;   AIC:  10964 </span></span>
<span><span class="co">#&gt;   AICc: 10964 </span></span>
<span><span class="co">#&gt;   BIC:  10992 </span></span>
<span><span class="co">#&gt;   model: "DyNAM" subModel: "rate"</span></span></code></pre></div>
<p>Of course, you can also add windows to the choice formula!</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">windowFormulaChoice</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">callsDependent</span> <span class="op">~</span> <span class="fu">inertia</span><span class="op">(</span><span class="va">callNetwork</span><span class="op">)</span> <span class="op">+</span> <span class="fu">recip</span><span class="op">(</span><span class="va">callNetwork</span><span class="op">)</span> <span class="op">+</span></span>
<span>                   <span class="fu">inertia</span><span class="op">(</span><span class="va">callNetwork</span>, window <span class="op">=</span> <span class="fl">300</span><span class="op">)</span> <span class="op">+</span></span>
<span>                   <span class="fu">recip</span><span class="op">(</span><span class="va">callNetwork</span>, window <span class="op">=</span> <span class="fl">300</span><span class="op">)</span> <span class="op">+</span></span>
<span>                   <span class="fu">tie</span><span class="op">(</span><span class="va">friendshipNetwork</span><span class="op">)</span> <span class="op">+</span> <span class="fu">recip</span><span class="op">(</span><span class="va">friendshipNetwork</span><span class="op">)</span> <span class="op">+</span></span>
<span>                   <span class="fu">same</span><span class="op">(</span><span class="va">actors</span><span class="op">$</span><span class="va">gradeType</span><span class="op">)</span> <span class="op">+</span> <span class="fu">same</span><span class="op">(</span><span class="va">actors</span><span class="op">$</span><span class="va">floor</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mod03Choice</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/estimate.html">estimate_dynam</a></span><span class="op">(</span></span>
<span>  <span class="va">windowFormulaChoice</span>,</span>
<span>  sub_model <span class="op">=</span> <span class="st">"choice"</span>,</span>
<span>  data <span class="op">=</span> <span class="va">socialEvolutionData</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mod03Choice</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; estimate_dynam(x = callsDependent ~ inertia(callNetwork) + recip(callNetwork) + </span></span>
<span><span class="co">#&gt;     inertia(callNetwork, window = 300) + recip(callNetwork, window = 300) + </span></span>
<span><span class="co">#&gt;     tie(friendshipNetwork) + recip(friendshipNetwork) + same(actors$gradeType) + </span></span>
<span><span class="co">#&gt;     same(actors$floor), sub_model = "choice", data = socialEvolutionData)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Effects details:</span></span>
<span><span class="co">#&gt;         Object            window</span></span>
<span><span class="co">#&gt; inertia callNetwork             </span></span>
<span><span class="co">#&gt; recip   callNetwork             </span></span>
<span><span class="co">#&gt; inertia callNetwork       300   </span></span>
<span><span class="co">#&gt; recip   callNetwork       300   </span></span>
<span><span class="co">#&gt; tie     friendshipNetwork       </span></span>
<span><span class="co">#&gt; recip   friendshipNetwork       </span></span>
<span><span class="co">#&gt; same    actors$gradeType        </span></span>
<span><span class="co">#&gt; same    actors$floor            </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;         Estimate Std. Error z-value  Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; inertia  4.29828    0.20193 21.2863 &lt; 2.2e-16 ***</span></span>
<span><span class="co">#&gt; recip   -0.48574    0.23205 -2.0932 0.0363293 *  </span></span>
<span><span class="co">#&gt; inertia  1.39628    0.36093  3.8685 0.0001095 ***</span></span>
<span><span class="co">#&gt; recip    5.02256    0.73879  6.7983 1.058e-11 ***</span></span>
<span><span class="co">#&gt; tie      1.50593    0.27206  5.5354 3.105e-08 ***</span></span>
<span><span class="co">#&gt; recip    0.62314    0.24975  2.4951 0.0125930 *  </span></span>
<span><span class="co">#&gt; same     0.44865    0.19815  2.2641 0.0235659 *  </span></span>
<span><span class="co">#&gt; same    -0.20953    0.18139 -1.1551 0.2480445    </span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Converged with max abs. score of 9e-05 </span></span>
<span><span class="co">#&gt;   Log-Likelihood: -565.9</span></span>
<span><span class="co">#&gt;   AIC:  1147.8 </span></span>
<span><span class="co">#&gt;   AICc: 1148.1 </span></span>
<span><span class="co">#&gt;   BIC:  1180.5 </span></span>
<span><span class="co">#&gt;   model: "DyNAM" subModel: "choice"</span></span></code></pre></div>
<p>All this shows you that you can specify different formula for the
rate and choice components of the model. This is a key advantage of the
DyNAM!</p>
<p>When comparing the information criteria (AIC / BIC) of the different
models, we see that the time windows explain a lot</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Compare different specifications of the subModel = "choice"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/AIC.html" class="external-link">AIC</a></span><span class="op">(</span><span class="va">mod02Choice</span>, <span class="va">mod03Choice</span><span class="op">)</span></span>
<span><span class="co">#&gt;             df      AIC</span></span>
<span><span class="co">#&gt; mod02Choice  6 1287.912</span></span>
<span><span class="co">#&gt; mod03Choice  8 1147.804</span></span>
<span></span>
<span><span class="co"># Compare different specifications of the subModel = "rate"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/AIC.html" class="external-link">AIC</a></span><span class="op">(</span><span class="va">mod03Rate</span>, <span class="va">mod04Rate</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in AIC.default(mod03Rate, mod04Rate): models are not all fitted to the same number of</span></span>
<span><span class="co">#&gt; observations</span></span>
<span><span class="co">#&gt;           df      AIC</span></span>
<span><span class="co">#&gt; mod03Rate  4 12014.20</span></span>
<span><span class="co">#&gt; mod04Rate  6 10963.75</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="rem-with-goldfish">REM with <code>goldfish</code><a class="anchor" aria-label="anchor" href="#rem-with-goldfish"></a>
</h4>
<p><code>goldfish</code> does not only run DyNAMs; it also runs REMs
(Butts, 2008). We can now also run REMs using the right-censored
intervals as introduced in Stadtfeld &amp; Block (2017). An equivalent
model specification to the DyNAM model we estimated above, including the
rate and choice sub-models, is:</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">allFormulaREM</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">callsDependent</span> <span class="op">~</span> </span>
<span>    <span class="fl">1</span> <span class="op">+</span> <span class="fu">indeg</span><span class="op">(</span><span class="va">callNetwork</span>, type <span class="op">=</span> <span class="st">"ego"</span><span class="op">)</span> <span class="op">+</span> <span class="fu">outdeg</span><span class="op">(</span><span class="va">callNetwork</span>, type <span class="op">=</span> <span class="st">"ego"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">indeg</span><span class="op">(</span><span class="va">friendshipNetwork</span>, type <span class="op">=</span> <span class="st">"ego"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">inertia</span><span class="op">(</span><span class="va">callNetwork</span><span class="op">)</span> <span class="op">+</span> <span class="fu">recip</span><span class="op">(</span><span class="va">callNetwork</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">inertia</span><span class="op">(</span><span class="va">callNetwork</span>, window <span class="op">=</span> <span class="fl">300</span><span class="op">)</span> <span class="op">+</span> <span class="fu">recip</span><span class="op">(</span><span class="va">callNetwork</span>, window <span class="op">=</span> <span class="fl">300</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">tie</span><span class="op">(</span><span class="va">friendshipNetwork</span><span class="op">)</span> <span class="op">+</span> <span class="fu">recip</span><span class="op">(</span><span class="va">friendshipNetwork</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">same</span><span class="op">(</span><span class="va">actors</span><span class="op">$</span><span class="va">gradeType</span><span class="op">)</span> <span class="op">+</span> <span class="fu">same</span><span class="op">(</span><span class="va">actors</span><span class="op">$</span><span class="va">floor</span><span class="op">)</span></span></code></pre></div>
<p>And we can estimate this model, to speed up estimation, we can use
any of the two <code>C</code> implementations of the estimation
algorithm. Setting the option <code>engine</code> on the
<code>estimationInit</code> argument, we can choose which version of the
<code>C</code> code to use. <code>"default_c"</code> implements the same
algorithm as the default one implemented in plain <code>R</code> code
that reduces the memory use by exploiting the sparsity of the dyads that
change the effects’ statistics after each event.
<code>"gather_compute"</code> implements a version with an overhead of
memory use, representing the data in a more usual tabular way but
reducing time estimation.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod01REM</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/estimate.html">estimate_rem</a></span><span class="op">(</span></span>
<span>  <span class="va">allFormulaREM</span>,</span>
<span>  data <span class="op">=</span> <span class="va">socialEvolutionData</span>,</span>
<span>  control_estimation <span class="op">=</span></span>
<span>    <span class="fu"><a href="../reference/set_estimation_opt.html">set_estimation_opt</a></span><span class="op">(</span>initial_damping <span class="op">=</span> <span class="fl">40</span>, engine <span class="op">=</span> <span class="st">"default_c"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod01REM</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/estimate.html">estimate_rem</a></span><span class="op">(</span></span>
<span>  <span class="va">allFormulaREM</span>,</span>
<span>  data <span class="op">=</span> <span class="va">socialEvolutionData</span>,</span>
<span>  control_estimation <span class="op">=</span> <span class="fu"><a href="../reference/set_estimation_opt.html">set_estimation_opt</a></span><span class="op">(</span>engine <span class="op">=</span> <span class="st">"gather_compute"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mod01REM</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; estimate_rem(x = callsDependent ~ 1 + indeg(callNetwork, type = "ego") + </span></span>
<span><span class="co">#&gt;     outdeg(callNetwork, type = "ego") + indeg(friendshipNetwork, </span></span>
<span><span class="co">#&gt;     type = "ego") + inertia(callNetwork) + recip(callNetwork) + </span></span>
<span><span class="co">#&gt;     inertia(callNetwork, window = 300) + recip(callNetwork, window = 300) + </span></span>
<span><span class="co">#&gt;     tie(friendshipNetwork) + recip(friendshipNetwork) + same(actors$gradeType) + </span></span>
<span><span class="co">#&gt;     same(actors$floor), data = socialEvolutionData, control_estimation = set_estimation_opt(engine = "gather_compute"))</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Effects details:</span></span>
<span><span class="co">#&gt;           Object              type  window</span></span>
<span><span class="co">#&gt; Intercept ""                  ""    ""    </span></span>
<span><span class="co">#&gt; indeg     "callNetwork"       "ego" ""    </span></span>
<span><span class="co">#&gt; outdeg    "callNetwork"       "ego" ""    </span></span>
<span><span class="co">#&gt; indeg     "friendshipNetwork" "ego" ""    </span></span>
<span><span class="co">#&gt; inertia   "callNetwork"       ""    ""    </span></span>
<span><span class="co">#&gt; recip     "callNetwork"       ""    ""    </span></span>
<span><span class="co">#&gt; inertia   "callNetwork"       ""    "300" </span></span>
<span><span class="co">#&gt; recip     "callNetwork"       ""    "300" </span></span>
<span><span class="co">#&gt; tie       "friendshipNetwork" ""    ""    </span></span>
<span><span class="co">#&gt; recip     "friendshipNetwork" ""    ""    </span></span>
<span><span class="co">#&gt; same      "actors$gradeType"  ""    ""    </span></span>
<span><span class="co">#&gt; same      "actors$floor"      ""    ""    </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;             Estimate Std. Error   z-value  Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; Intercept -19.763568   0.136731 -144.5434 &lt; 2.2e-16 ***</span></span>
<span><span class="co">#&gt; indeg       0.086900   0.071528    1.2149 0.2243968    </span></span>
<span><span class="co">#&gt; outdeg     -0.222330   0.040445   -5.4971 3.860e-08 ***</span></span>
<span><span class="co">#&gt; indeg       0.010742   0.017245    0.6229 0.5333320    </span></span>
<span><span class="co">#&gt; inertia     6.203483   0.189796   32.6850 &lt; 2.2e-16 ***</span></span>
<span><span class="co">#&gt; recip      -0.313425   0.154555   -2.0279 0.0425690 *  </span></span>
<span><span class="co">#&gt; inertia    -1.589903   0.179494   -8.8577 &lt; 2.2e-16 ***</span></span>
<span><span class="co">#&gt; recip       7.013842   0.170730   41.0814 &lt; 2.2e-16 ***</span></span>
<span><span class="co">#&gt; tie         0.853373   0.206297    4.1366 3.525e-05 ***</span></span>
<span><span class="co">#&gt; recip       0.930856   0.194742    4.7800 1.753e-06 ***</span></span>
<span><span class="co">#&gt; same        0.470688   0.132528    3.5516 0.0003829 ***</span></span>
<span><span class="co">#&gt; same       -0.670748   0.123206   -5.4441 5.207e-08 ***</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Converged with max abs. score of 0 </span></span>
<span><span class="co">#&gt;   Log-Likelihood: -5639</span></span>
<span><span class="co">#&gt;   AIC:  11302 </span></span>
<span><span class="co">#&gt;   AICc: 11302 </span></span>
<span><span class="co">#&gt;   BIC:  11359 </span></span>
<span><span class="co">#&gt;   model: "REM" subModel: "choice"</span></span></code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://jameshollway.com" class="external-link">James Hollway</a>, <a href="https://sn.ethz.ch/profile.html?persid=210738" class="external-link">Christoph Stadtfeld</a>, Marion Hoffman, Alvaro Uzaheta.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer>
</div>






  </body>
</html>
